
from pathlib import Path
# import pandas as pd

# Read configuration
configfile: "config/config.yaml"

SOURCEDIR = Path(config["sourcedir"])
READSDIR = Path(config["readsdir"])
genome_fasta = Path(config["genome_fasta"])
existing_annotation = Path(config["existing_annotation"])
OUTDIR = Path(config["results"])



rule all:
    input:
        OUTDIR / "sample.sam"


rule minimap2_align:
    input:
        genome = genome_fasta,
        fq = READSDIR
    params:
        outdir = OUTDIR
    output:
        sam = OUTDIR / "sample.sam"
    threads: 4
    singularity:
        'docker://quay.io/biocontainers/minimap2:2.17--h5bf99c6_4'
    shell:
        '''
        minimap2 \
        -t 4 \
        -ax splice \
        -uf \
        -k14 \
        {input.genome} \
        {input.fq} > {output.sam}
        '''


